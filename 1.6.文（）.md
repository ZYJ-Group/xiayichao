**一、这个是我找的论文，可能是少有的光谱+空间注意力。**

题目： Adaptive Fusion-Based Two-Flow **Spectral–Spatial Transformer** Network for SAR-Based Optical Cloud Removal

1.当前去云研究

a) 图像级融合：网络进行特征提取之前，直接沿通道维度将光学和SAR输入拼接

b) 特征级融合:  光学和SAR图像提取后的特征进行拼接

![image-20260106155507625](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260106155507625.png)

**总结：**多数去云注意力设计主要围绕空间维/空间结构（spatial attention）展开。**光谱注意力相对更少**，通常是以“通道注意力（channel attention）/3D 卷积/简单拼接”这种更弱的方式来处理。

**想法：**SAR和光学图像是基于**不同的成像原理**生成的，并具有独特的特性。如下

****

​	SAR图像：对表面粗糙度、含水量和介电特性敏感。

​	光学图像：通过被动传感器获取，可以提供颜色、空间和光谱信息。

**本文创新：**（1）光谱+空间Transformer模块，AFSST（a fusion spa+spe Tblock）

​			  光谱Transformer提取光学图像的光谱信息；

​			  空间Transformer提取sar图像的空间信息。

​		  （2）MSFEM（ Multiscale SAR Feature Extraction Mechanism）模块，包含sobel算子，重点关注局 			部边缘区域，进一步通过SpaTBs进行处理

​	  	（3）新数据集GF-CR，收集来源Gaofen-6 and Gaofen-3（中国卫星）



**2.网络框架：**

![image-20260106165552126](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260106165552126.png)

图（a）光谱，图（b）空间，图（c）是MSFEM模块



3.MSFEM模块（Multiscale SAR Feature Extraction Mechanism）

使用sobel算子，**设置了更新参数a**，提取sar空间特征

![image-20260106165724183](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260106165724183.png)

4.MSA多头自注意力机制

![image-20260106165859967](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260106165859967.png)

​		光谱注意力（SWMSA）；空间窗口注意力（LWMSA）；

都是多头自注意力机制，只是这个用来提取的特征不一样，所以命名不同。



5. **TFusion （光学和sar融合的机制-自适应加权融合）**

![image-20260106165917013](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260106165917013.png)

​					   融合特征: ![image-20260108135314260](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260108135314260.png)

![image-20260108135452135](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260108135452135.png)

![image-20260108135505835](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260108135505835.png)



第 1 次前向传播时，用提取的特征 O1,S1， 经过 TFusion 的小网络， 计算出 βWO1,βWS1，后面更新的是 **生成 β参数**。



**6.loss**函数设计

像素损失：

![image-20260108140238880](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260108140238880.png)

空间损失：

![image-20260107141920207](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260107141920207.png)

光谱损失：

![image-20260107141954647](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260107141954647.png)

总损失：

![image-20260106165942884](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260106165942884.png)

计算出总损失，去更新网络权重



**7.结果**

**AFSST-spa方法**是，只有空间-Transformer，来对照光谱的效果。

**AFSST方法**是空间+光谱-Transformer。

![image-20260106170014677](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260106170014677.png)

![image-20260108140452464](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260108140452464.png)





分析：1.之前去云很少是光谱注意力，基本论文中提的光谱，是浅显的拼接起来，做了通道注意力。

想法：空间+光谱注意力是有效果的，可以试一试。



![image-20260108141300441](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260108141300441.png)

2.包括师兄发我的那篇也是空间+光谱注意力

题目：S2 -Transformer for Mask-Aware Hyperspectral Image Reconstruction

背景：编码孔径快照压缩成像器（CASSI）

![image-20260108141805479](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260108141805479.png)

![image-20260108141940555](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260108141940555.png)



3.文中提及：训练是128随机裁剪的，可视化图片也是128的，可以借鉴来跑快一点

原文数据集SEN12MSCR是256*256的**一下不是**

**一下不是**

**一下不是**

**一下不是**

**一下不是**

---------------------

2.这篇包括你之前发我的哪个里面是什么注意力方法？

都是MSA多头自注意力机制，但是名字不一样，是因为用在不同的地方，例如文中的LMMSA是空间的注意力，SWMSA是光谱的，起名规则

![image-20260107145214170](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260107145214170.png)



3.他训练是128随机裁剪的，但是示意图也是128的，可以借鉴

![image-20260107145313872](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260107145313872.png)



二、一些跑的结果图



![image-20260107155318339](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260107155318339.png)

![image-20260107155331131](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20260107155331131.png)

后面准备：

1.跑其余四个

spgan是没有sar的，是修改通道还是？





